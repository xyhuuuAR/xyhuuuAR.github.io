<!doctype html>
<html>
	<head>
        <meta charset="UTF-8">
        <title>MERT AR</title>
        <meta name="viewport" content="width=device-width">
		<link rel="stylesheet" type="text/css" href="style.css">
		<script type="text/javascript" src="Scripts/DeviceOrientationHandler.js"></script>
		<script type="text/javascript" src="Scripts/Arrow.js"></script>
		<script src="https://d3js.org/d3.v4.min.js"></script>
		<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
	</head>
	<body>
		<div id="overlay">
			<div>
				<button id="startButton">Start</button>
				<p>Using device motion might require a user interaction.</p>
			</div>
		</div>
		<!-- Camera -->
		<main id="camera">
			<div id="container">
				<!-- Camera sensor -->
				<canvas class="canvas" id="camera--sensor"></canvas>
					<div class="canvas" id="cubecanvas">
						<svg class="direction" id="bigbluearrow"></svg>
						<img id="cameraIcon" src="ar-camera.svg" onerror="this.onerror=null; this.src='ar-camera.png'" width="50" height="50">
					</div>	
			</div>
		    
		    <!-- Camera view -->
		    <video id="camera--view" autoplay playsinline></video>
		    
		    <!-- Camera output -->
		    <img src="//:0" alt="" id="camera--output">

		    <!-- Camera trigger -->
		    <button id="camera--trigger">Take a picture</button>
		</main>

		<!-- Reference to JavaScript files -->
		<script type="text/javascript" src="Scripts/DeviceCameraControl.js"></script>
        <script>
           	var startButton = document.getElementById( 'startButton' );
			startButton.addEventListener( 'click', function () {
				requestOrientationPermission();
				cameraStart();
				init();
				animate();

			}, false );

			function init(){
				var overlay = document.getElementById( 'overlay' );
				overlay.remove();
			}

			function animate() {
				window.requestAnimationFrame( animate );
			}
		</script>
	</body>
</html>